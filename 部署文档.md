##  部署文档

### 一、前置要求

- 服务器：配置最少2-2，日均用户超过百或者租户使用 升级最少2-4
- 域名需要备案：因为需要开启强制HTTPS，才可以打开摄像头权限，具体规则请百度
- 数据库：redis + mysql  + nginx 版本不限制，需要和项目在同一个服务器



### 二、服务器配置

1. 数据库配置

   >**Redis**  数据库
   >
   >端口：6379
   >
   >密码：必须无（源码版本自己修改）
   >
   >
   >
   >**mysql**
   >
   >端口：3306
   >
   >数据库名：disk-tenant
   >
   >数据用户名：disk-tenant
   >
   >数据库用户密码：disk-tenant

   

2. nginx配置

   >需要在配置文件添加：
   >
   >```shell
   >proxy_set_header X-Real-IP $remote_addr;  #发送真实客户端IP
   >proxy_set_header X-Forwarded-For
   >```
   >
   >后端接口前缀：**/api**
   >
   >后端端口：**9080**
   >
   >
   >
   >**参考配置：**
   >
   >```shell
   > server {
   >    listen 80;
   >    listen 443 ssl http2 ;
   >    server_name bd2.zxyang.cn;
   >    root /www/server/stop;
   >    server_name bd2.zxyang.cn;  #改成你的域名
   > #SSL-START SSL相关配置，请勿删除或修改下一行带注释的404规则
   >    #error_page 404/404.html;
   >    #HTTP_TO_HTTPS_START
   >    if ($server_port !~ 443){
   >        rewrite ^(/.*)$ https://$host$1 permanent;
   >    }
   >    #HTTP_TO_HTTPS_END
   >    ssl_certificate    /www/server/panel/vhost/cert/bd2.zxyang.cn/fullchain.pem;#改成你的域名SSL证书的位置
   >    ssl_certificate_key    /www/server/panel/vhost/cert/bd2.zxyang.cn/privkey.pem;#改成你的域名SSL证书的位置
   >    ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;
   >    ssl_ciphers EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;
   >    ssl_prefer_server_ciphers on;
   >    ssl_session_cache shared:SSL:10m;
   >    ssl_session_timeout 10m;
   >    add_header Strict-Transport-Security "max-age=31536000";
   >    error_page 497  https://$host$request_uri;
   >
   >    #SSL-END
   >    location / {
   >        root /www/wwwroot/bdw/dist; # 设置Vue打包后的静态文件目录 改成你的上传的目录
   >        try_files $uri $uri/ /index.html; # 为了支持SPA应用的路由
   >    }
   >
   >    location /api/ {
   >     proxy_set_header X-Real-IP $remote_addr;  #发送真实客户端IP
   >    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;  # 追加客户端IP至现有的X-Forwarded-For头部
   >        proxy_pass http://127.0.0.1:9080/; # 假设您的API端点都以/api开始 如果后端端口有修改就换成实际的
   >        proxy_http_version 1.1;
   >        proxy_set_header Upgrade $http_upgrade;
   >        proxy_set_header Connection 'upgrade';
   >        proxy_set_header Host $host;
   >        proxy_cache_bypass $http_upgrade;
   >    }
   >}
   >```
   
### 三、部署

1.创建数据库，按照上述数据库配置

2.导入sql文件

3.启动后端java文件配置

出现：则启动成功
